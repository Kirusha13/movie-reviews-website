-- Скрипт для добавления URL постеров к фильмам
-- Используется для тестирования интерфейса

USE movie_reviews_db;

-- Обновляем постеры для существующих фильмов
UPDATE movies SET poster_url = 'https://image.tmdb.org/t/p/w500/arw2vcBveWOVZr6pxd9XTd1TdQa.jpg' WHERE title = 'Форрест Гамп';
UPDATE movies SET poster_url = 'https://image.tmdb.org/t/p/w500/9xjZS2rlVxm8SFx8kPC3aIGCOYQ.jpg' WHERE title = 'Титаник';
UPDATE movies SET poster_url = 'https://image.tmdb.org/t/p/w500/f89U3ADr1oiB1s9GkdPOEpXUk5H.jpg' WHERE title = 'Матрица';
UPDATE movies SET poster_url = 'https://image.tmdb.org/t/p/w500/q6y0Go1tsGEsmtFryDOJo3dEmqu.jpg' WHERE title = 'Побег из Шоушенка';

-- Добавляем больше фильмов с постером для лучшего тестирования
INSERT INTO movies (title, original_title, release_year, director, duration, description, country, language, status, poster_url) VALUES 
('Интерстеллар', 'Interstellar', 2014, 'Кристофер Нолан', 169, 'Фантастический фильм о путешествии через червоточину в поисках нового дома для человечества', 'США', 'Английский', 'watched', 'https://image.tmdb.org/t/p/w500/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg'),
('Начало', 'Inception', 2010, 'Кристофер Нолан', 148, 'Фильм о снах внутри снов и краже идей из подсознания', 'США', 'Английский', 'watched', 'https://image.tmdb.org/t/p/w500/9gk7adHYeDvHkCSEqAvQNLV5Ugo.jpg'),
('Криминальное чтиво', 'Pulp Fiction', 1994, 'Квентин Тарантино', 154, 'Культовый фильм о преступном мире Лос-Анджелеса', 'США', 'Английский', 'watched', 'https://image.tmdb.org/t/p/w500/d5iIlFn5s0ImszYzBPb8JPIfbXD.jpg'),
('Список Шиндлера', 'Schindler\'s List', 1993, 'Стивен Спилберг', 195, 'Драма о немецком бизнесмене, спасшем жизни тысяч евреев во время Холокоста', 'США', 'Английский', 'watched', 'https://image.tmdb.org/t/p/w500/bGhhNzJYDsuLruNN5bq3eLdGgQY.jpg'),
('Властелин колец: Возвращение короля', 'The Lord of the Rings: The Return of the King', 2003, 'Питер Джексон', 201, 'Финальная часть трилогии о путешествии Фродо к Мордору', 'США', 'Английский', 'watchlist', 'https://image.tmdb.org/t/p/w500/rCzpDGLbEYoYAw1WcwF2JdfShAo.jpg'),
('Темный рыцарь', 'The Dark Knight', 2008, 'Кристофер Нолан', 152, 'Бэтмен противостоит хаосу, который сеет Джокер в Готэме', 'США', 'Английский', 'watched', 'https://image.tmdb.org/t/p/w500/qJ2tW6WMGOux6o6Xe6wFh30HRNU.jpg'),
('Крестный отец', 'The Godfather', 1972, 'Фрэнсис Форд Коппола', 175, 'Эпическая сага о семье Корлеоне и мафиозном мире Нью-Йорка', 'США', 'Английский', 'watchlist', 'https://image.tmdb.org/t/p/w500/3bhkrj58Vtu7enYsRolD1fZdja1.jpg'),
('Бойцовский клуб', 'Fight Club', 1999, 'Дэвид Финчер', 139, 'Фильм о подпольных боях и поиске смысла жизни', 'США', 'Английский', 'watched', 'https://image.tmdb.org/t/p/w500/pB8BM7pdSp6B6Ih7QZ4DrQ3PmJK.jpg');

-- Добавляем связи новых фильмов с жанрами
INSERT INTO movie_genres (movie_id, genre_id) VALUES 
(5, 4), (5, 2), -- Интерстеллар: Фантастика, Драма
(6, 4), (6, 1), -- Начало: Фантастика, Боевик
(7, 1), (7, 6), -- Криминальное чтиво: Боевик, Детектив
(8, 2), (8, 6), -- Список Шиндлера: Драма, Детектив
(9, 4), (9, 1), -- Властелин колец: Фантастика, Боевик
(10, 1), (10, 2), -- Темный рыцарь: Боевик, Драма
(11, 2), (11, 6), -- Крестный отец: Драма, Детектив
(12, 2), (12, 1); -- Бойцовский клуб: Драма, Боевик

-- Добавляем связи новых фильмов с актерами
INSERT INTO movie_actors (movie_id, actor_id, role_name, is_lead) VALUES 
(5, 1, 'Купер', TRUE), -- Интерстеллар - Том Хэнкс
(6, 4, 'Кобб', TRUE), -- Начало - Роберт Дауни мл.
(7, 4, 'Винсент Вега', TRUE), -- Криминальное чтиво - Роберт Дауни мл.
(8, 1, 'Оскар Шиндлер', TRUE), -- Список Шиндлера - Том Хэнкс
(9, 5, 'Гэндальф', TRUE), -- Властелин колец - Морган Фриман
(10, 4, 'Брюс Уэйн/Бэтмен', TRUE), -- Темный рыцарь - Роберт Дауни мл.
(11, 1, 'Дон Корлеоне', TRUE), -- Крестный отец - Том Хэнкс
(12, 4, 'Рассказчик', TRUE); -- Бойцовский клуб - Роберт Дауни мл.

-- Добавляем рецензии для новых фильмов
INSERT INTO reviews (movie_id, reviewer_name, rating, review_text) VALUES 
(5, 'user', 9, 'Потрясающий фильм! Визуальные эффекты и сюжет на высоте'),
(5, 'friend', 8, 'Сложный, но очень интересный фильм о времени и пространстве'),
(6, 'user', 8, 'Умный триллер с неожиданными поворотами'),
(6, 'friend', 9, 'Гениальная идея и отличное исполнение'),
(7, 'user', 7, 'Культовый фильм, но немного затянуто'),
(7, 'friend', 8, 'Классика жанра, отличные диалоги'),
(8, 'user', 10, 'Шедевр! Очень эмоционально и трогательно'),
(8, 'friend', 9, 'Важный фильм о человечности в темные времена'),
(9, 'user', 9, 'Эпическая фантастика, отличные спецэффекты'),
(9, 'friend', 8, 'Хорошо снято, но очень длинно'),
(10, 'user', 9, 'Лучший фильм о Бэтмене! Хит Леджер великолепен'),
(10, 'friend', 8, 'Темный и атмосферный, отличная игра актеров'),
(11, 'user', 8, 'Классика гангстерского кино'),
(11, 'friend', 9, 'Марлон Брандо в роли Дона Корлеоне - это что-то'),
(12, 'user', 7, 'Интересный фильм, но немного странный'),
(12, 'friend', 8, 'Культовый фильм с неожиданным финалом');

-- Добавляем фильмы в список желаемых
INSERT INTO watchlist (movie_id, priority, notes) VALUES 
(9, 'high', 'Обязательно посмотреть всю трилогию'),
(11, 'medium', 'Классика, которую нужно увидеть');

-- Обновляем рейтинги фильмов на основе рецензий (запускаем триггеры)
UPDATE reviews SET rating = rating WHERE id > 0;
